{"ast":null,"code":"import nextConnect from \"next-connect\";\nimport middleware from \"../../middlewares/middleware\";\nimport multer from \"multer\";\nconst upload = multer({\n  dest: \"/tmp\"\n});\nexport const config = {\n  api: {\n    bodyParser: false\n  }\n};\nconst handler = nextConnect();\nhandler.use(middleware);\nhandler.post(upload.single(\"file\"), async (req, res) => {\n  console.log(\"UPLOAD LEASE\");\n  const signedUrl = \"https://wellick-lease-image-s3-stage.s3.amazonaws.com/lease-image-1-1599786710182?AWSAccessKeyId=AKIAWQRXSB72EUDRGGZB&Expires=1600841263&Signature=ChdcYROKYj55w6jM7lIIX6b9UGo%3D\";\n  let {\n    type\n  } = req.body;\n  console.log(req.file); // let res2;\n  // if (file) {\n  //   res2 = await fetch(signedUrl, {\n  //     method: \"PUT\",\n  //     body: file,\n  //     headers: {\n  //       \"Content-Type\": type,\n  //     },\n  //   });\n  // } else {\n  //   res.status(500).json({ statusText: \"No image selected\" });\n  //   return;\n  // }\n\n  res.json({\n    status: \"200\"\n  }); // res.json(res2);\n});\nexport default handler;","map":{"version":3,"sources":["/Users/jackiedong/Documents/perch/perchcredit.github.io/perch/packages/landingpage/pages/api/upload-lease.js"],"names":["nextConnect","middleware","multer","upload","dest","config","api","bodyParser","handler","use","post","single","req","res","console","log","signedUrl","type","body","file","json","status"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,MAAMC,MAAM,GAAGD,MAAM,CAAC;AAAEE,EAAAA,IAAI,EAAE;AAAR,CAAD,CAArB;AAEA,OAAO,MAAMC,MAAM,GAAG;AACpBC,EAAAA,GAAG,EAAE;AACHC,IAAAA,UAAU,EAAE;AADT;AADe,CAAf;AAMP,MAAMC,OAAO,GAAGR,WAAW,EAA3B;AACAQ,OAAO,CAACC,GAAR,CAAYR,UAAZ;AAEAO,OAAO,CAACE,IAAR,CAAaP,MAAM,CAACQ,MAAP,CAAc,MAAd,CAAb,EAAoC,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACtDC,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,QAAMC,SAAS,GACb,mLADF;AAGA,MAAI;AAAEC,IAAAA;AAAF,MAAWL,GAAG,CAACM,IAAnB;AACAJ,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACO,IAAhB,EANsD,CAOtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAN,EAAAA,GAAG,CAACO,IAAJ,CAAS;AAAEC,IAAAA,MAAM,EAAE;AAAV,GAAT,EApBsD,CAqBtD;AACD,CAtBD;AAwBA,eAAeb,OAAf","sourcesContent":["import nextConnect from \"next-connect\";\nimport middleware from \"../../middlewares/middleware\";\nimport multer from \"multer\";\nconst upload = multer({ dest: \"/tmp\" });\n\nexport const config = {\n  api: {\n    bodyParser: false,\n  },\n};\n\nconst handler = nextConnect();\nhandler.use(middleware);\n\nhandler.post(upload.single(\"file\"), async (req, res) => {\n  console.log(\"UPLOAD LEASE\");\n  const signedUrl =\n    \"https://wellick-lease-image-s3-stage.s3.amazonaws.com/lease-image-1-1599786710182?AWSAccessKeyId=AKIAWQRXSB72EUDRGGZB&Expires=1600841263&Signature=ChdcYROKYj55w6jM7lIIX6b9UGo%3D\";\n\n  let { type } = req.body;\n  console.log(req.file);\n  // let res2;\n  // if (file) {\n  //   res2 = await fetch(signedUrl, {\n  //     method: \"PUT\",\n  //     body: file,\n  //     headers: {\n  //       \"Content-Type\": type,\n  //     },\n  //   });\n  // } else {\n  //   res.status(500).json({ statusText: \"No image selected\" });\n  //   return;\n  // }\n  res.json({ status: \"200\" });\n  // res.json(res2);\n});\n\nexport default handler;\n"]},"metadata":{},"sourceType":"module"}